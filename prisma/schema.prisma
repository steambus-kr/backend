generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model State {
  id                Int       @id @map("_id")
  last_fetched_info DateTime?
}

model Game {
  app_id          Int           @id @map("_id")
  title           String
  description     String
  owner_count     Int
  release_date    String
  genre_names     String[]
  genres          Genre[]       @relation(fields: [genre_names], references: [genre_name])
  player_count    PlayerCount[]
  thumbnail_src   String
  review_positive Int
  review_negative Int
}

model PlayerCount {
  id     String @id @default(auto()) @map("_id") @db.ObjectId
  app_id Int
  app    Game   @relation(fields: [app_id], references: [app_id], onDelete: Cascade)

  count Int
  date  DateTime

  @@unique([app_id, date])
}

model Genre {
  genre_name String @id @map("_id")
  app_ids    Int[]
  games      Game[] @relation(fields: [app_ids], references: [app_id])
}
